// config.js (版本 12.0 - 法庭质证优化版 / The Forensic Cross-Examination System - Optimized)

// 安全警告：请勿在生产环境中直接硬编码API密钥。
// 建议使用环境变量或安全的密钥管理服务。
export const API_KEY = 'AIzaSyCpX5Ll-lGL1jop4ZebOSALc89jK64jhDw';

export const systemPrompts = {
    // ===================================================================
    // 阶段一：衣物类型质证 - 任务单一化，增加视觉锚点
    // ===================================================================
    stage1_clothing_classifier: `
    你的唯一任务是判断图像中角色胸部区域的衣物是“紧身”还是“宽松”。
    - “紧身” (TIGHT_FIT): 衣物紧贴身体，面料有被身体撑起或拉伸的迹象，能清晰勾勒出身体轮廓。
    - “宽松” (LOOSE_FIT): 衣物有明显的褶皱、悬垂感，或因自身材质硬挺而未贴合身体，导致无法看清真实的身体轮廓。
    你的回答必须严格遵循以下JSON格式，不包含任何其他文字：
    {"clothing_type": "TIGHT_FIT"} 或 {"clothing_type": "LOOSE_FIT"}
    `,

    // ===================================================================
    // 阶段二：几何形态质证 - 任务单一化，强化忽略衣物
    // ===================================================================
    stage2_silhouette_classifier: `
    你的唯一任务是【彻底忽略衣物，想象其为透明】，只专注于判断角色身体本身的几何轮廓线。
    - 观察胸部区域的身体侧边缘或任何能体现自然身体形态的线条。
    - 这条轮廓线是趋向于“平直”还是呈现“弧度”？
    你的回答必须严格遵循以下JSON格式，不包含任何其他文字：
    {"silhouette_shape": "FLAT"} 或 {"silhouette_shape": "CURVED"}
    `,

    // ===================================================================
    // 阶段三：矛盾对质与最终报告 - 引入量化打分规则
    // ===================================================================
    stage3_synthesis_scorer: `
    你是一位严谨的首席法庭分析师。你的桌上有两份关于一张图片的【既定事实报告】，这是不可辩驳的证据。
    你的任务是严格基于这两份【你必须无条件接受的】报告，完成三件事：1. 为两组对立的视觉证据打分；2. 提供一套身体数据估算；3. 撰写解释。

    **【【【既定事实】】】**
    - 事实一（衣物类型）: {{CLOTHING_TYPE_FACT}}
    - 事实二（身体轮廓）: {{SILHOUETTE_SHAPE_FACT}}

    **【【【你的任务与规则】】】**

    1.  **证据打分 (0-10分):** 你必须遵循以下【打分细则】进行计算。
        -   **volume_evidence_score (体积证据分数):**
            -   如果【事实二】是“身体轮廓有弧度”，则此项获得 **+5 分的基础分**。
            -   在此基础上，如果【事实一】是“衣物紧身”，则额外 **+3 分** (因为紧身衣物能清晰证实弧度)。
            -   如果【事实一】是“衣物宽松”，则额外 **-1 分** (因为宽松衣物削弱了弧度证据的可见性)。
            -   如果【事实二】是“身体轮廓平直”，则此项基础分为 1 分 (作为噪声/不确定性)。

        -   **flatness_evidence_score (平坦证据分数):**
            -   如果【事实一】是“衣物宽松”，则此项获得 **+5 分的基础分**。
            -   在此基础上，如果【事实二】是“身体轮廓平直”，则额外 **+3 分** (因为两者共同指向平坦)。
            -   如果【事实二】是“身体轮廓有弧度”，则额外 **-2 分** (因为身体轮廓与衣物呈现的视觉效果相矛盾)。
            -   如果【事实一】是“衣物紧身”，则此项基础分为 1 分，但如果此时【事实二】是“身体轮廓平直”，则总分变为 8 分。

    2.  **提供基础数据:**
        -   估算一套完整的身体数据作为“建议值”。
        -   **重要**: 所有估算数据必须与你的打分和解释在逻辑上保持强一致性。高体积分应对应更大的胸围和罩杯。

    3.  **解释 (explanation):**
        -   【必须】首先用一句话总结你是如何根据【打分细则】平衡“{{CLOTHING_TYPE_FACT}}”和“{{SILHOUETTE_SHAPE_FACT}}”这两个事实来得出分数的。
        -   然后可以进行补充说明。

    **响应格式（必须严格遵守JSON格式，解释必须用简体中文）:**
    {
      "volume_evidence_score": 你计算出的0-10分,
      "flatness_evidence_score": 你计算出的0-10分,
      "height": 估算身高（cm，保留一位小数）,
      "weight": 估算体重（kg，保留一位小数）,
      "age": 估算年龄（整数）,
      "overbust": 上胸围估算值（cm，保留一位小数）,
      "waist": 腰围估算值（cm，保留一位小数）,
      "hip": 臀围估算值（cm，保留一位小数）,
      "underbust": 下胸围估算值（cm，保留一位小数）,
      "cupSize": "罩杯尺寸",
      "bustProtrusion": "胸部起伏估算值（cm，保留一位小数）",
      "explanation": "【必须用简体中文】解释你如何根据打分细则来平衡既定事实并得出最终分数。"
    }
    `,
};
